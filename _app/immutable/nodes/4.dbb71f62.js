//js
import{s as Se,e as fe,i as M,y as me,d as c,o as kt,O as ae,P as oe,h as C,j as g,k as W,x as y,A as ue,f as G,a as F,g as R,c as Z,l as K,m as H,n as se,R as pt,E as we,S as wt,p as Re,F as Pe,r as yt,u as Et,v as St,w as Lt,H as It,T as Ae,C as Ve,I as De,U as Te,V as ke,G as Ct}from"../chunks/scheduler.42865049.js";import{S as Le,i as Ie,b as ee,d as te,m as le,a as V,g as ye,t as j,c as Ee,e as ne,f as Me}from"../chunks/index.156b26f3.js";import{e as q,M as Tt,b as je,g as Bt,c as Ot,d as Be,r as Gt,a as Rt}from"../chunks/MapTooltip.svelte_svelte_type_style_lang.f15e276a.js";import{a as Pt,T as Mt}from"../chunks/Table.svelte_svelte_type_style_lang.48bb58bc.js";import{b as At}from"../chunks/paths.e1fbdf68.js";import{b as Vt,e as Ne,d as Dt,s as Nt}from"../chunks/utils.9e297d88.js";const bl=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ze(t,e,n){const l=t.slice();return l[11]=e[n],l}function Ke(t,e,n){const l=t.slice();return l[14]=e[n],l[16]=n,l}function He(t){let e,n,l,i,a,o,r=`${t[0]}px`,h=q(t[1]),f=[];for(let v=0;v<h.length;v+=1)f[v]=We(Ke(t,h,v));let s=q(t[4]),m=[];for(let v=0;v<s.length;v+=1)m[v]=Fe(ze(t,s,v));return{c(){e=ae("svg"),n=ae("defs"),l=ae("linearGradient"),i=ae("stop"),a=ae("linearGradient"),o=ae("stop");for(let v=0;v<f.length;v+=1)f[v].c();for(let v=0;v<m.length;v+=1)m[v].c();this.h()},l(v){e=oe(v,"svg",{viewBox:!0,preserveAspectRatio:!0,class:!0});var L=C(e);n=oe(L,"defs",{});var _=C(n);l=oe(_,"linearGradient",{id:!0});var E=C(l);i=oe(E,"stop",{"stop-color":!0}),C(i).forEach(c),E.forEach(c),a=oe(_,"linearGradient",{id:!0});var k=C(a);o=oe(k,"stop",{"stop-color":!0,"stop-opacity":!0}),C(o).forEach(c),k.forEach(c);for(let D=0;D<f.length;D+=1)f[D].l(_);_.forEach(c);for(let D=0;D<m.length;D+=1)m[D].l(L);L.forEach(c),this.h()},h(){g(i,"stop-color",t[3]),g(l,"id","solid"),g(o,"stop-color",t[3]),g(o,"stop-opacity","0.2"),g(a,"id","transparent"),g(e,"viewBox","0 0 100 100"),g(e,"preserveAspectRatio","none"),g(e,"class","svelte-m0a6o9"),W(e,"height",r)},m(v,L){M(v,e,L),y(e,n),y(n,l),y(l,i),y(n,a),y(a,o);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(n,null);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(e,null)},p(v,L){if(L&8&&g(i,"stop-color",v[3]),L&8&&g(o,"stop-color",v[3]),L&10){h=q(v[1]);let _;for(_=0;_<h.length;_+=1){const E=Ke(v,h,_);f[_]?f[_].p(E,L):(f[_]=We(E),f[_].c(),f[_].m(n,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=h.length}if(L&54){s=q(v[4]);let _;for(_=0;_<s.length;_+=1){const E=ze(v,s,_);m[_]?m[_].p(E,L):(m[_]=Fe(E),m[_].c(),m[_].m(e,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=s.length}L&1&&r!==(r=`${v[0]}px`)&&W(e,"height",r)},d(v){v&&c(e),ue(f,v),ue(m,v)}}}function We(t){let e,n,l,i;return{c(){e=ae("linearGradient"),n=ae("stop"),l=ae("stop"),this.h()},l(a){e=oe(a,"linearGradient",{id:!0,gradientTransform:!0});var o=C(e);n=oe(o,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),C(n).forEach(c),l=oe(o,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),C(l).forEach(c),o.forEach(c),this.h()},h(){g(n,"offset","5%"),g(n,"stop-color",t[3]),g(n,"stop-opacity",t[16]===0?1:.2),g(l,"offset","95%"),g(l,"stop-color",t[3]),g(l,"stop-opacity",t[16]===0?.2:1),g(e,"id",i=t[14]+"_gradient"),g(e,"gradientTransform","rotate(90)")},m(a,o){M(a,e,o),y(e,n),y(e,l)},p(a,o){o&8&&g(n,"stop-color",a[3]),o&8&&g(l,"stop-color",a[3]),o&2&&i!==(i=a[14]+"_gradient")&&g(e,"id",i)},d(a){a&&c(e)}}}function Fe(t){let e,n,l;function i(...a){return t[8](t[11],...a)}return{c(){e=ae("path"),this.h()},l(a){e=oe(a,"path",{d:!0,fill:!0}),C(e).forEach(c),this.h()},h(){g(e,"d",n=t[5](...t[1].map(i),t[11].value)),g(e,"fill",l="url(#"+(Array.isArray(t[2])?`${t[11][t[2][0]]===t[2][1]?"solid":"transparent"}`:typeof t[2]=="string"?`${t[11][t[1][0]]===t[2]&&t[11][t[1][1]]===t[2]?"solid":t[11][t[1][0]]===t[2]?`${t[1][0]}_gradient`:t[11][t[1][1]]===t[2]?`${t[1][1]}_gradient`:"transparent"}`:"solid")+")")},m(a,o){M(a,e,o)},p(a,o){t=a,o&50&&n!==(n=t[5](...t[1].map(i),t[11].value))&&g(e,"d",n),o&22&&l!==(l="url(#"+(Array.isArray(t[2])?`${t[11][t[2][0]]===t[2][1]?"solid":"transparent"}`:typeof t[2]=="string"?`${t[11][t[1][0]]===t[2]&&t[11][t[1][1]]===t[2]?"solid":t[11][t[1][0]]===t[2]?`${t[1][0]}_gradient`:t[11][t[1][1]]===t[2]?`${t[1][1]}_gradient`:"transparent"}`:"solid")+")")&&g(e,"fill",l)},d(a){a&&c(e)}}}function jt(t){let e,n=t[4]&&He(t);return{c(){n&&n.c(),e=fe()},l(l){n&&n.l(l),e=fe()},m(l,i){n&&n.m(l,i),M(l,e,i)},p(l,[i]){l[4]?n?n.p(l,i):(n=He(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:me,o:me,d(l){l&&c(e),n&&n.d(l)}}}const zt=100;function Kt(t,e,n){let{data:l}=e,{height:i=80}=e,{gap:a=10}=e,{keys:o=["from","to"]}=e,{highlight:r="a"}=e,{color:h="#27a0cc"}=e,f,s;function m(_,E){const k=zt-a*(_.length-1);return function(D){const T=_.slice(1).reduce((O,p)=>D>=p?O+a:O,0);return D*(k/E)+T}}function v(_){let E=JSON.parse(JSON.stringify(_)),k={},D={},T={},O={};for(const p of o){k[p]={};for(const S of E)k[p][S[p]]||(k[p][S[p]]={key:S[p],size:0}),k[p][S[p]].size+=S.value;let b=0;for(const S of Object.keys(k[p]).sort((I,N)=>I.localeCompare(N)))k[p][S].start=b,k[p][S].current=b,b+=k[p][S].size,T[p]=b;D[p]=Object.keys(k[p]).map(S=>k[p][S].start),O[p]=m(D[p],T[p])}for(const p of E)for(const b of o)p[`${b}_start`]=k[b][p[b]].current,k[b][p[b]].current+=p.value;n(5,s=(p,b,S)=>`
			M ${O[o[0]](p)},0
			L ${O[o[0]](p+S-.1)},0
			C ${O[o[0]](p+S-.1)},40 ${O[o[1]](b+S-.1)},40 ${O[o[1]](b+S-.1)},80
			L ${O[o[1]](b+S/2)},100
			L ${O[o[1]](b)},80
			C ${O[o[1]](b)},40 ${O[o[0]](p)},40 ${O[o[0]](p)},0 Z`),n(4,f=E)}kt(()=>v(l));const L=(_,E)=>_[`${E}_start`];return t.$$set=_=>{"data"in _&&n(6,l=_.data),"height"in _&&n(0,i=_.height),"gap"in _&&n(7,a=_.gap),"keys"in _&&n(1,o=_.keys),"highlight"in _&&n(2,r=_.highlight),"color"in _&&n(3,h=_.color)},t.$$.update=()=>{t.$$.dirty&64&&v(l)},[i,o,r,h,f,s,l,a,L]}class Ht extends Le{constructor(e){super(),Ie(this,e,Kt,jt,Se,{data:6,height:0,gap:7,keys:1,highlight:2,color:3})}}function Ze(t){let e,n=t[2].areanm+"",l,i,a,o,r,h,f,s,m,v;function L(b,S){return!b[1]||b[1]==="to"?Ft:Wt}let _=L(t),E=_(t),k=(!t[1]||t[1]==="from")&&Xe(t);f=new Ht({props:{data:[{from:"a",to:"a",value:t[2].d.home+t[2].d.within},{from:"a",to:"b",value:t[2].d.resident-t[2].d.home-t[2].d.within},{from:"b",to:"a",value:t[2].d.workday-t[2].d.home-t[2].d.within}],highlight:t[1]==="from"?["to","a"]:t[1]==="to"?["from","a"]:"a"}});function D(b,S){return!b[1]||b[1]==="from"?Xt:Zt}let T=D(t),O=T(t),p=(!t[1]||t[1]==="to")&&Je(t);return{c(){e=G("h2"),l=K(n),i=F(),a=G("div"),E.c(),o=F(),k&&k.c(),r=F(),h=G("div"),ee(f.$$.fragment),s=F(),O.c(),m=F(),p&&p.c(),this.h()},l(b){e=R(b,"H2",{class:!0});var S=C(e);l=H(S,n),S.forEach(c),i=Z(b),a=R(b,"DIV",{class:!0});var I=C(a);E.l(I),o=Z(I),k&&k.l(I),r=Z(I),h=R(I,"DIV",{class:!0});var N=C(h);te(f.$$.fragment,N),N.forEach(c),s=Z(I),O.l(I),m=Z(I),p&&p.l(I),I.forEach(c),this.h()},h(){g(e,"class","svelte-1072tfb"),g(h,"class","svelte-1072tfb"),W(h,"grid-column","span 2"),W(h,"line-height",0),g(a,"class","info-grid svelte-1072tfb")},m(b,S){M(b,e,S),y(e,l),M(b,i,S),M(b,a,S),E.m(a,null),y(a,o),k&&k.m(a,null),y(a,r),y(a,h),le(f,h,null),y(a,s),O.m(a,null),y(a,m),p&&p.m(a,null),v=!0},p(b,S){(!v||S&4)&&n!==(n=b[2].areanm+"")&&se(l,n),_===(_=L(b))&&E?E.p(b,S):(E.d(1),E=_(b),E&&(E.c(),E.m(a,o))),!b[1]||b[1]==="from"?k?k.p(b,S):(k=Xe(b),k.c(),k.m(a,r)):k&&(k.d(1),k=null);const I={};S&4&&(I.data=[{from:"a",to:"a",value:b[2].d.home+b[2].d.within},{from:"a",to:"b",value:b[2].d.resident-b[2].d.home-b[2].d.within},{from:"b",to:"a",value:b[2].d.workday-b[2].d.home-b[2].d.within}]),S&2&&(I.highlight=b[1]==="from"?["to","a"]:b[1]==="to"?["from","a"]:"a"),f.$set(I),T===(T=D(b))&&O?O.p(b,S):(O.d(1),O=T(b),O&&(O.c(),O.m(a,m))),!b[1]||b[1]==="to"?p?p.p(b,S):(p=Je(b),p.c(),p.m(a,null)):p&&(p.d(1),p=null)},i(b){v||(V(f.$$.fragment,b),v=!0)},o(b){j(f.$$.fragment,b),v=!1},d(b){b&&(c(e),c(i),c(a)),E.d(),k&&k.d(),ne(f),O.d(),p&&p.d()}}}function Wt(t){let e,n,l,i=(t[2].d.home+t[2].d.within).toLocaleString()+"",a;return{c(){e=G("div"),n=K("Living and working here "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Living and working here "),l=R(r,"STRONG",{});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(e,"class","text-muted svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=(o[2].d.home+o[2].d.within).toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Ft(t){let e,n,l,i=t[2].d.resident.toLocaleString()+"",a;return{c(){e=G("div"),n=K("Living here "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Living here "),l=R(r,"STRONG",{class:!0});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(l,"class","text-big svelte-1072tfb"),g(e,"class","svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=o[2].d.resident.toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Xe(t){let e,n,l,i=(t[2].d.workday-t[2].d.home-t[2].d.within).toLocaleString()+"",a;return{c(){e=G("div"),n=K("Travelling from another area "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Travelling from another area "),l=R(r,"STRONG",{});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(e,"class","text-muted text-right svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=(o[2].d.workday-o[2].d.home-o[2].d.within).toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Zt(t){let e,n,l,i=(t[2].d.home+t[2].d.within).toLocaleString()+"",a;return{c(){e=G("div"),n=K("Living and working here "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Living and working here "),l=R(r,"STRONG",{});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(e,"class","text-muted svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=(o[2].d.home+o[2].d.within).toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Xt(t){let e,n,l,i=t[2].d.workday.toLocaleString()+"",a;return{c(){e=G("div"),n=K("Working here "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Working here "),l=R(r,"STRONG",{class:!0});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(l,"class","text-big svelte-1072tfb"),g(e,"class","svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=o[2].d.workday.toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Je(t){let e,n,l,i=(t[2].d.resident-t[2].d.home-t[2].d.within).toLocaleString()+"",a;return{c(){e=G("div"),n=K("Travelling to another area "),l=G("strong"),a=K(i),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);n=H(r,"Travelling to another area "),l=R(r,"STRONG",{});var h=C(l);a=H(h,i),h.forEach(c),r.forEach(c),this.h()},h(){g(e,"class","text-muted text-right svelte-1072tfb")},m(o,r){M(o,e,r),y(e,n),y(e,l),y(l,a)},p(o,r){r&4&&i!==(i=(o[2].d.resident-o[2].d.home-o[2].d.within).toLocaleString()+"")&&se(a,i)},d(o){o&&c(e)}}}function Jt(t){let e,n,l,i;n=new Pt({props:{id:"select",mode:"search",options:t[0].arealist,idKey:"areacd",labelKey:"areanm",placeholder:"Find an area...",autoClear:!0}}),n.$on("change",t[5]);let a=t[2]&&Ze(t);return{c(){e=G("div"),ee(n.$$.fragment),l=F(),a&&a.c(),this.h()},l(o){e=R(o,"DIV",{class:!0});var r=C(e);te(n.$$.fragment,r),l=Z(r),a&&a.l(r),r.forEach(c),this.h()},h(){g(e,"class","info-palette svelte-1072tfb")},m(o,r){M(o,e,r),le(n,e,null),y(e,l),a&&a.m(e,null),i=!0},p(o,[r]){const h={};r&1&&(h.options=o[0].arealist),n.$set(h),o[2]?a?(a.p(o,r),r&4&&V(a,1)):(a=Ze(o),a.c(),V(a,1),a.m(e,null)):a&&(ye(),j(a,1,1,()=>{a=null}),Ee())},i(o){i||(V(n.$$.fragment,o),V(a),i=!0)},o(o){j(n.$$.fragment,o),j(a),i=!1},d(o){o&&c(e),ne(n),a&&a.d()}}}function Ut(t,e,n){let l,{data:i}=e,{selected:a}=e,{hovered:o}=e,{highlight:r}=e;function h(f){pt.call(this,t,f)}return t.$$set=f=>{"data"in f&&n(0,i=f.data),"selected"in f&&n(3,a=f.selected),"hovered"in f&&n(4,o=f.hovered),"highlight"in f&&n(1,r=f.highlight)},t.$$.update=()=>{t.$$.dirty&27&&n(2,l=(!r||!a)&&o?{...i.metadata[o],d:i.areadata[o],state:"hovered"}:a?{...i.metadata[a],d:i.areadata[a],state:"selected"}:null)},[i,r,l,a,o,h]}class qt extends Le{constructor(e){super(),Ie(this,e,Ut,Jt,Se,{data:0,selected:3,hovered:4,highlight:1})}}function Ue(t,e,n){const l=t.slice();return l[22]=e[n],l}function qe(t,e,n){const l=t.slice();return l[22]=e[n],l}function Qe(t,e,n){const l=t.slice();return l[27]=e[n],l[29]=n,l}function Ye(t,e,n){const l=t.slice();return l[27]=e[n],l}function $e(t,e,n){const l=t.slice();return l[22]=e[n],l[29]=n,l}function xe(t,e,n){const l=t.slice();return l[27]=e[n],l[29]=n,l}function et(t){let e,n,l,i;return{c(){e=ae("rect"),this.h()},l(a){e=oe(a,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),C(e).forEach(c),this.h()},h(){g(e,"x",n=t[14](t[27])),g(e,"y",0),g(e,"width",l=t[14](t[7][t[29]+1])-t[14](t[27])),g(e,"height",100),g(e,"fill",i=t[8][t[29]]),g(e,"class","svelte-1n0fg1i")},m(a,o){M(a,e,o)},p(a,o){o[0]&128&&n!==(n=a[14](a[27]))&&g(e,"x",n),o[0]&128&&l!==(l=a[14](a[7][a[29]+1])-a[14](a[27]))&&g(e,"width",l),o[0]&256&&i!==(i=a[8][a[29]])&&g(e,"fill",i)},d(a){a&&c(e)}}}function tt(t){let e,n,l,i,a,o;function r(){return t[16](t[22])}return{c(){e=ae("rect"),this.h()},l(h){e=oe(h,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,title:!0,role:!0,class:!0}),C(e).forEach(c),this.h()},h(){g(e,"x",n=t[14](t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]]))),g(e,"y",0),g(e,"width",l=t[14]((t[29]===t[12].length-1?t[7][t[7].length-1]:t[13](t[22][t[2]],t[12][t[29]+1][t[2]]))-(t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]])))),g(e,"height",100),g(e,"fill","rgba(0,0,0,0)"),g(e,"title",i=`${t[29]===t[12].length-1?t[7][t[7].length-1]:t[13](t[22][t[2]],t[12][t[29]+1][t[2]])}-${t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]])}`),g(e,"role","none"),g(e,"class","svelte-1n0fg1i")},m(h,f){M(h,e,f),a||(o=we(e,"mouseenter",r),a=!0)},p(h,f){t=h,f[0]&4228&&n!==(n=t[14](t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]])))&&g(e,"x",n),f[0]&4228&&l!==(l=t[14]((t[29]===t[12].length-1?t[7][t[7].length-1]:t[13](t[22][t[2]],t[12][t[29]+1][t[2]]))-(t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]]))))&&g(e,"width",l),f[0]&4228&&i!==(i=`${t[29]===t[12].length-1?t[7][t[7].length-1]:t[13](t[22][t[2]],t[12][t[29]+1][t[2]])}-${t[29]===0?t[7][0]:t[13](t[22][t[2]],t[12][t[29]-1][t[2]])}`)&&g(e,"title",i)},d(h){h&&c(e),a=!1,o()}}}function lt(t){let e,n,l;return{c(){e=ae("line"),this.h()},l(i){e=oe(i,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,class:!0}),C(e).forEach(c),this.h()},h(){g(e,"x1",n=t[14](t[27])),g(e,"x2",l=t[14](t[27])),g(e,"y1",0),g(e,"y2",155),g(e,"stroke","white"),g(e,"class","svelte-1n0fg1i")},m(i,a){M(i,e,a)},p(i,a){a[0]&128&&n!==(n=i[14](i[27]))&&g(e,"x1",n),a[0]&128&&l!==(l=i[14](i[27]))&&g(e,"x2",l)},d(i){i&&c(e)}}}function nt(t){let e,n=t[9](t[7][t[29]])+"",l;return{c(){e=G("div"),l=K(n),this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0});var a=C(e);l=H(a,n),a.forEach(c),this.h()},h(){g(e,"class","tick svelte-1n0fg1i"),W(e,"left",t[14](t[27])+"%"),W(e,"transform","translateX("+(t[29]==0&&t[11]?"-2px":"-50%")+")")},m(i,a){M(i,e,a),y(e,l)},p(i,a){a[0]&640&&n!==(n=i[9](i[7][i[29]])+"")&&se(l,n),a[0]&128&&W(e,"left",i[14](i[27])+"%"),a[0]&2048&&W(e,"transform","translateX("+(i[29]==0&&i[11]?"-2px":"-50%")+")")},d(i){i&&c(e)}}}function it(t){let e,n=q(t[1].filter(t[18])),l=[];for(let i=0;i<n.length;i+=1)l[i]=at(qe(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=fe()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=fe()},m(i,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,a);M(i,e,a)},p(i,a){if(a[0]&17470){n=q(i[1].filter(i[18]));let o;for(o=0;o<n.length;o+=1){const r=qe(i,n,o);l[o]?l[o].p(r,a):(l[o]=at(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&c(e),ue(l,i)}}}function at(t){let e,n,l,i=Math.round(t[22][t[2]]).toLocaleString()+"",a,o;return{c(){e=G("div"),n=F(),l=G("div"),a=K(i),o=K(t[10]),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0}),C(e).forEach(c),n=Z(r),l=R(r,"DIV",{class:!0,style:!0});var h=C(l);a=H(h,i),o=H(h,t[10]),h.forEach(c),this.h()},h(){g(e,"class","marker svelte-1n0fg1i"),W(e,"width",t[5]+"px"),W(e,"left","calc("+t[14](t[22][t[2]])+"% - "+t[5]/2+"px)"),g(l,"class","value svelte-1n0fg1i"),W(l,"left",t[14](t[22][t[2]])+"%")},m(r,h){M(r,e,h),M(r,n,h),M(r,l,h),y(l,a),y(l,o)},p(r,h){h[0]&32&&W(e,"width",r[5]+"px"),h[0]&62&&W(e,"left","calc("+r[14](r[22][r[2]])+"% - "+r[5]/2+"px)"),h[0]&30&&i!==(i=Math.round(r[22][r[2]]).toLocaleString()+"")&&se(a,i),h[0]&1024&&se(o,r[10]),h[0]&30&&W(l,"left",r[14](r[22][r[2]])+"%")},d(r){r&&(c(e),c(n),c(l))}}}function ot(t){let e,n=q(t[1].filter(t[19])),l=[];for(let i=0;i<n.length;i+=1)l[i]=rt(Ue(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=fe()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=fe()},m(i,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,a);M(i,e,a)},p(i,a){if(a[0]&17455){n=q(i[1].filter(i[19]));let o;for(o=0;o<n.length;o+=1){const r=Ue(i,n,o);l[o]?l[o].p(r,a):(l[o]=rt(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&c(e),ue(l,i)}}}function rt(t){let e,n,l,i=Math.round(t[22][t[2]]).toLocaleString()+"",a,o;return{c(){e=G("div"),n=F(),l=G("div"),a=K(i),o=K(t[10]),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0}),C(e).forEach(c),n=Z(r),l=R(r,"DIV",{class:!0,style:!0});var h=C(l);a=H(h,i),o=H(h,t[10]),h.forEach(c),this.h()},h(){g(e,"class","marker marker-hovered svelte-1n0fg1i"),W(e,"width",t[5]+"px"),W(e,"left","calc("+t[14](t[22][t[2]])+"% - "+t[5]/2+"px)"),g(l,"class","value svelte-1n0fg1i"),W(l,"left",t[14](t[22][t[2]])+"%")},m(r,h){M(r,e,h),M(r,n,h),M(r,l,h),y(l,a),y(l,o)},p(r,h){h[0]&32&&W(e,"width",r[5]+"px"),h[0]&47&&W(e,"left","calc("+r[14](r[22][r[2]])+"% - "+r[5]/2+"px)"),h[0]&15&&i!==(i=Math.round(r[22][r[2]]).toLocaleString()+"")&&se(a,i),h[0]&1024&&se(o,r[10]),h[0]&15&&W(l,"left",r[14](r[22][r[2]])+"%")},d(r){r&&(c(e),c(n),c(l))}}}function Qt(t){let e,n,l,i,a,o,r,h=t[9](t[7][t[7].length-1])+"",f,s,m,v,L,_,E=q(t[7].slice(0,t[7].length-1)),k=[];for(let u=0;u<E.length;u+=1)k[u]=et(xe(t,E,u));let D=q(t[12]),T=[];for(let u=0;u<D.length;u+=1)T[u]=tt($e(t,D,u));let O=q(t[7]),p=[];for(let u=0;u<O.length;u+=1)p[u]=lt(Ye(t,O,u));let b=q(t[7].slice(0,t[7].length-1)),S=[];for(let u=0;u<b.length;u+=1)S[u]=nt(Qe(t,b,u));let I=typeof t[4]=="string"&&it(t),N=typeof t[0]=="string"&&ot(t);return{c(){e=G("div"),n=ae("svg");for(let u=0;u<k.length;u+=1)k[u].c();l=ae("rect");for(let u=0;u<T.length;u+=1)T[u].c();i=fe();for(let u=0;u<p.length;u+=1)p[u].c();a=F();for(let u=0;u<S.length;u+=1)S[u].c();o=F(),r=G("div"),f=K(h),s=K(t[10]),m=F(),I&&I.c(),v=F(),N&&N.c(),this.h()},l(u){e=R(u,"DIV",{class:!0,style:!0});var B=C(e);n=oe(B,"svg",{viewBox:!0,preserveAspectRatio:!0,role:!0,class:!0});var d=C(n);for(let z=0;z<k.length;z+=1)k[z].l(d);l=oe(d,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,class:!0}),C(l).forEach(c);for(let z=0;z<T.length;z+=1)T[z].l(d);i=fe();for(let z=0;z<p.length;z+=1)p[z].l(d);d.forEach(c),a=Z(B);for(let z=0;z<S.length;z+=1)S[z].l(B);o=Z(B),r=R(B,"DIV",{class:!0,style:!0});var X=C(r);f=H(X,h),s=H(X,t[10]),X.forEach(c),m=Z(B),I&&I.l(B),v=Z(B),N&&N.l(B),B.forEach(c),this.h()},h(){g(l,"x",0),g(l,"y",0),g(l,"width",100),g(l,"height",100),g(l,"fill","none"),g(l,"stroke","#999"),g(l,"class","svelte-1n0fg1i"),g(n,"viewBox","0 0 100 100"),g(n,"preserveAspectRatio","none"),g(n,"role","none"),g(n,"class","svelte-1n0fg1i"),g(r,"class","tick svelte-1n0fg1i"),W(r,"right","0"),W(r,"transform","translateX("+(t[11]?"2px":"50%")+")"),g(e,"class","container svelte-1n0fg1i"),W(e,"height",t[6]+"px")},m(u,B){M(u,e,B),y(e,n);for(let d=0;d<k.length;d+=1)k[d]&&k[d].m(n,null);y(n,l);for(let d=0;d<T.length;d+=1)T[d]&&T[d].m(n,null);y(n,i);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(n,null);y(e,a);for(let d=0;d<S.length;d+=1)S[d]&&S[d].m(e,null);y(e,o),y(e,r),y(r,f),y(r,s),y(e,m),I&&I.m(e,null),y(e,v),N&&N.m(e,null),L||(_=we(n,"mouseleave",t[17]),L=!0)},p(u,B){if(B[0]&16768){E=q(u[7].slice(0,u[7].length-1));let d;for(d=0;d<E.length;d+=1){const X=xe(u,E,d);k[d]?k[d].p(X,B):(k[d]=et(X),k[d].c(),k[d].m(n,l))}for(;d<k.length;d+=1)k[d].d(1);k.length=E.length}if(B[0]&61580){D=q(u[12]);let d;for(d=0;d<D.length;d+=1){const X=$e(u,D,d);T[d]?T[d].p(X,B):(T[d]=tt(X),T[d].c(),T[d].m(n,i))}for(;d<T.length;d+=1)T[d].d(1);T.length=D.length}if(B[0]&16512){O=q(u[7]);let d;for(d=0;d<O.length;d+=1){const X=Ye(u,O,d);p[d]?p[d].p(X,B):(p[d]=lt(X),p[d].c(),p[d].m(n,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=O.length}if(B[0]&19072){b=q(u[7].slice(0,u[7].length-1));let d;for(d=0;d<b.length;d+=1){const X=Qe(u,b,d);S[d]?S[d].p(X,B):(S[d]=nt(X),S[d].c(),S[d].m(e,o))}for(;d<S.length;d+=1)S[d].d(1);S.length=b.length}B[0]&640&&h!==(h=u[9](u[7][u[7].length-1])+"")&&se(f,h),B[0]&1024&&se(s,u[10]),B[0]&2048&&W(r,"transform","translateX("+(u[11]?"2px":"50%")+")"),typeof u[4]=="string"?I?I.p(u,B):(I=it(u),I.c(),I.m(e,v)):I&&(I.d(1),I=null),typeof u[0]=="string"?N?N.p(u,B):(N=ot(u),N.c(),N.m(e,null)):N&&(N.d(1),N=null),B[0]&64&&W(e,"height",u[6]+"px")},i:me,o:me,d(u){u&&c(e),ue(k,u),ue(T,u),ue(p,u),ue(S,u),I&&I.d(),N&&N.d(),L=!1,_()}}}function Yt(t,e,n){let l;const i=wt();let{data:a}=e,{valueKey:o="value"}=e,{idKey:r="id"}=e,{hovered:h=null}=e,{selected:f=null}=e,{lineWidth:s=3}=e,{height:m=20}=e,{breaks:v=[0,10,25,50,75,100]}=e,{colors:L=["rgba(255,255,255,0.0)","rgba(255,255,255,0.1)","rgba(255,255,255,0.2)","rgba(255,255,255,0.3)","rgba(255,255,255,0.4)"]}=e,{formatTick:_=u=>Math.round(u).toLocaleString()}=e,{suffix:E=""}=e,{snapTicks:k=!0}=e;const D=(u,B)=>{const d=[...u].sort((x,he)=>x[B]-he[B]),X=d.map(x=>x[B]),z=[];for(let x=0;x<d.length-1;x++)X.indexOf(d[x][B])===x&&z.push(d[x]);return z},T=(u,B)=>(u+B)/2,O=u=>100*((u-v[0])/(v[v.length-1]-v[0])),p=u=>{n(0,h=u),i("hover",{id:u})},b=u=>p(u[r]),S=()=>p(null),I=u=>u[r]===f,N=u=>u[r]===h;return t.$$set=u=>{"data"in u&&n(1,a=u.data),"valueKey"in u&&n(2,o=u.valueKey),"idKey"in u&&n(3,r=u.idKey),"hovered"in u&&n(0,h=u.hovered),"selected"in u&&n(4,f=u.selected),"lineWidth"in u&&n(5,s=u.lineWidth),"height"in u&&n(6,m=u.height),"breaks"in u&&n(7,v=u.breaks),"colors"in u&&n(8,L=u.colors),"formatTick"in u&&n(9,_=u.formatTick),"suffix"in u&&n(10,E=u.suffix),"snapTicks"in u&&n(11,k=u.snapTicks)},t.$$.update=()=>{t.$$.dirty[0]&6&&n(12,l=D(a,o))},[h,a,o,r,f,s,m,v,L,_,E,k,l,T,O,p,b,S,I,N]}class $t extends Le{constructor(e){super(),Ie(this,e,Yt,Qt,Se,{data:1,valueKey:2,idKey:3,hovered:0,selected:4,lineWidth:5,height:6,breaks:7,colors:8,formatTick:9,suffix:10,snapTicks:11},null,[-1,-1])}}function st(t){let e,n,l,i;function a(r){t[5](r)}let o={data:t[1][t[2]],breaks:t[1][`${t[2]}Breaks`],idKey:"code"};return t[0]!==void 0&&(o.hovered=t[0]),n=new $t({props:o}),Re.push(()=>Me(n,"hovered",a)),n.$on("hover",t[6]),{c(){e=G("div"),ee(n.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0});var h=C(e);te(n.$$.fragment,h),h.forEach(c),this.h()},h(){g(e,"class","breaks-palette svelte-1173c3d")},m(r,h){M(r,e,h),le(n,e,null),i=!0},p(r,h){const f={};h&6&&(f.data=r[1][r[2]]),h&6&&(f.breaks=r[1][`${r[2]}Breaks`]),!l&&h&1&&(l=!0,f.hovered=r[0],Pe(()=>l=!1)),n.$set(f)},i(r){i||(V(n.$$.fragment,r),i=!0)},o(r){j(n.$$.fragment,r),i=!1},d(r){r&&c(e),ne(n)}}}function xt(t){let e,n,l=t[1]&&st(t);return{c(){l&&l.c(),e=fe()},l(i){l&&l.l(i),e=fe()},m(i,a){l&&l.m(i,a),M(i,e,a),n=!0},p(i,[a]){i[1]?l?(l.p(i,a),a&2&&V(l,1)):(l=st(i),l.c(),V(l,1),l.m(e.parentNode,e)):l&&(ye(),j(l,1,1,()=>{l=null}),Ee())},i(i){n||(V(l),n=!0)},o(i){j(l),n=!1},d(i){i&&c(e),l&&l.d(i)}}}function el(t,e,n){let{data:l}=e,{journeys:i}=e,{selected:a}=e,{hovered:o}=e,{highlight:r}=e;function h(s){o=s,n(0,o)}function f(s){pt.call(this,t,s)}return t.$$set=s=>{"data"in s&&n(3,l=s.data),"journeys"in s&&n(1,i=s.journeys),"selected"in s&&n(4,a=s.selected),"hovered"in s&&n(0,o=s.hovered),"highlight"in s&&n(2,r=s.highlight)},[o,i,r,l,a,h,f]}class tl extends Le{constructor(e){super(),Ie(this,e,el,xt,Se,{data:3,journeys:1,selected:4,hovered:0,highlight:2})}}function ft(t,e,n){const l=t.slice();return l[43]=e[n],l}function ht(t){let e,n;return e=new qt({props:{data:t[5],selected:t[1],hovered:t[2],highlight:t[7]}}),e.$on("change",t[14]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),n=!0},p(l,i){const a={};i[0]&32&&(a.data=l[5]),i[0]&2&&(a.selected=l[1]),i[0]&4&&(a.hovered=l[2]),i[0]&128&&(a.highlight=l[7]),e.$set(a)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function ut(t){let e,n,l;function i(o){t[21](o)}let a={data:t[5],journeys:t[3],selected:t[1],highlight:t[7]};return t[2]!==void 0&&(a.hovered=t[2]),e=new tl({props:a}),Re.push(()=>Me(e,"hovered",i)),e.$on("hover",t[15]),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,r){le(e,o,r),l=!0},p(o,r){const h={};r[0]&32&&(h.data=o[5]),r[0]&8&&(h.journeys=o[3]),r[0]&2&&(h.selected=o[1]),r[0]&128&&(h.highlight=o[7]),!n&&r[0]&4&&(n=!0,h.hovered=o[2],Pe(()=>n=!1)),e.$set(h)},i(o){l||(V(e.$$.fragment,o),l=!0)},o(o){j(e.$$.fragment,o),l=!1},d(o){ne(e,o)}}}function _t(t){let e,n,l,i,a,o=q(t[11]),r=[];for(let f=0;f<o.length;f+=1)r[f]=dt(ft(t,o,f));const h=f=>j(r[f],1,1,()=>{r[f]=null});return n=new je({props:{id:"overlay-lines",type:"geojson",data:t[12].lines,$$slots:{default:[nl]},$$scope:{ctx:t}}}),i=new je({props:{id:"overlay-points",type:"geojson",data:t[12].points,$$slots:{default:[il]},$$scope:{ctx:t}}}),{c(){for(let f=0;f<r.length;f+=1)r[f].c();e=F(),ee(n.$$.fragment),l=F(),ee(i.$$.fragment)},l(f){for(let s=0;s<r.length;s+=1)r[s].l(f);e=Z(f),te(n.$$.fragment,f),l=Z(f),te(i.$$.fragment,f)},m(f,s){for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(f,s);M(f,e,s),le(n,f,s),M(f,l,s),le(i,f,s),a=!0},p(f,s){if(s[0]&51422){o=q(f[11]);let L;for(L=0;L<o.length;L+=1){const _=ft(f,o,L);r[L]?(r[L].p(_,s),V(r[L],1)):(r[L]=dt(_),r[L].c(),V(r[L],1),r[L].m(e.parentNode,e))}for(ye(),L=o.length;L<r.length;L+=1)h(L);Ee()}const m={};s[0]&4096&&(m.data=f[12].lines),s[0]&16777216&&(m.$$scope={dirty:s,ctx:f}),n.$set(m);const v={};s[0]&4096&&(v.data=f[12].points),s[0]&16777216&&(v.$$scope={dirty:s,ctx:f}),i.$set(v)},i(f){if(!a){for(let s=0;s<o.length;s+=1)V(r[s]);V(n.$$.fragment,f),V(i.$$.fragment,f),a=!0}},o(f){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)j(r[s]);j(n.$$.fragment,f),j(i.$$.fragment,f),a=!1},d(f){f&&(c(e),c(l)),ue(r,f),ne(n,f),ne(i,f)}}}function ll(t){let e,n,l,i,a,o,r;function h(s){t[22](s)}let f={id:t[43].key+"-fill",type:"fill",data:t[3]&&t[7]?t[3][t[7]]:[],idKey:"code",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]},order:"place_suburb",hover:!0,select:!0,selected:t[1],highlight:!0,highlighted:t[6],visible:t[4]===t[43].key};return t[2]!==void 0&&(f.hovered=t[2]),e=new Be({props:f}),Re.push(()=>Me(e,"hovered",h)),e.$on("hover",t[15]),e.$on("select",t[14]),i=new Be({props:{id:t[43].key+"-line",type:"line",paint:{"line-color":"#555","line-width":.5},order:"place_other",visible:t[4]===t[43].key}}),o=new Be({props:{id:t[43].key+"-selected",type:"line",paint:{"line-color":["case",["==",["feature-state","selected"],!0],"white",["==",["feature-state","hovered"],!0],"white","rgba(0,0,0,0)"],"line-width":["case",["==",["feature-state","selected"],!0],2.5,1]},order:"place_other",visible:t[4]===t[43].key}}),{c(){ee(e.$$.fragment),l=F(),ee(i.$$.fragment),a=F(),ee(o.$$.fragment)},l(s){te(e.$$.fragment,s),l=Z(s),te(i.$$.fragment,s),a=Z(s),te(o.$$.fragment,s)},m(s,m){le(e,s,m),M(s,l,m),le(i,s,m),M(s,a,m),le(o,s,m),r=!0},p(s,m){const v={};m[0]&2048&&(v.id=s[43].key+"-fill"),m[0]&136&&(v.data=s[3]&&s[7]?s[3][s[7]]:[]),m[0]&2&&(v.selected=s[1]),m[0]&64&&(v.highlighted=s[6]),m[0]&2064&&(v.visible=s[4]===s[43].key),!n&&m[0]&4&&(n=!0,v.hovered=s[2],Pe(()=>n=!1)),e.$set(v);const L={};m[0]&2048&&(L.id=s[43].key+"-line"),m[0]&2064&&(L.visible=s[4]===s[43].key),i.$set(L);const _={};m[0]&2048&&(_.id=s[43].key+"-selected"),m[0]&2064&&(_.visible=s[4]===s[43].key),o.$set(_)},i(s){r||(V(e.$$.fragment,s),V(i.$$.fragment,s),V(o.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),j(i.$$.fragment,s),j(o.$$.fragment,s),r=!1},d(s){s&&(c(l),c(a)),ne(e,s),ne(i,s),ne(o,s)}}}function dt(t){let e,n;const l=[{id:t[43].key},{type:t[43].type},{promoteId:"areacd"},t[43].props];let i={$$slots:{default:[ll]},$$scope:{ctx:t}};for(let a=0;a<l.length;a+=1)i=It(i,l[a]);return e=new je({props:i}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,o){le(e,a,o),n=!0},p(a,o){const r=o[0]&2048?Bt(l,[{id:a[43].key},{type:a[43].type},l[2],Ot(a[43].props)]):{};o[0]&16779486&&(r.$$scope={dirty:o,ctx:a}),e.$set(r)},i(a){n||(V(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){ne(e,a)}}}function nl(t){let e,n;return e=new Be({props:{id:"overlay-lines",type:"line",paint:{"line-color":"white","line-width":1},order:"place_other"}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),n=!0},p:me,i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function il(t){let e,n;return e=new Be({props:{id:"overlay-points",type:"circle",paint:{"circle-color":"white","circle-radius":3},order:"place_other"}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),n=!0},p:me,i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function al(t){let e,n,l=t[11][1].props.data&&_t(t);return{c(){l&&l.c(),e=fe()},l(i){l&&l.l(i),e=fe()},m(i,a){l&&l.m(i,a),M(i,e,a),n=!0},p(i,a){i[11][1].props.data?l?(l.p(i,a),a[0]&2048&&V(l,1)):(l=_t(i),l.c(),V(l,1),l.m(e.parentNode,e)):l&&(ye(),j(l,1,1,()=>{l=null}),Ee())},i(i){n||(V(l),n=!0)},o(i){j(l),n=!1},d(i){i&&c(e),l&&l.d(i)}}}function ol(t){let e,n,l,i,a,o,r;const h=t[20].default,f=yt(h,t,t[24],null);let s=t[9]&&ht(t),m=t[10]&&t[7]&&ut(t);function v(_){t[23](_)}let L={style:At+"/data/style.json",location:{bounds:Vt.ew},options:{antialias:!0},interactive:t[8],controls:t[8],$$slots:{default:[al]},$$scope:{ctx:t}};return t[0]!==void 0&&(L.map=t[0]),a=new Tt({props:L}),Re.push(()=>Me(a,"map",v)),a.$on("load",t[13]),{c(){e=G("div"),f&&f.c(),n=F(),s&&s.c(),l=F(),m&&m.c(),i=F(),ee(a.$$.fragment),this.h()},l(_){e=R(_,"DIV",{class:!0});var E=C(e);f&&f.l(E),n=Z(E),s&&s.l(E),l=Z(E),m&&m.l(E),i=Z(E),te(a.$$.fragment,E),E.forEach(c),this.h()},h(){g(e,"class","map svelte-1jag0v4")},m(_,E){M(_,e,E),f&&f.m(e,null),y(e,n),s&&s.m(e,null),y(e,l),m&&m.m(e,null),y(e,i),le(a,e,null),r=!0},p(_,E){f&&f.p&&(!r||E[0]&16777216)&&Et(f,h,_,_[24],r?Lt(h,_[24],E,null):St(_[24]),null),_[9]?s?(s.p(_,E),E[0]&512&&V(s,1)):(s=ht(_),s.c(),V(s,1),s.m(e,l)):s&&(ye(),j(s,1,1,()=>{s=null}),Ee()),_[10]&&_[7]?m?(m.p(_,E),E[0]&1152&&V(m,1)):(m=ut(_),m.c(),V(m,1),m.m(e,i)):m&&(ye(),j(m,1,1,()=>{m=null}),Ee());const k={};E[0]&256&&(k.interactive=_[8]),E[0]&256&&(k.controls=_[8]),E[0]&16783582&&(k.$$scope={dirty:E,ctx:_}),!o&&E[0]&1&&(o=!0,k.map=_[0],Pe(()=>o=!1)),a.$set(k)},i(_){r||(V(f,_),V(s),V(m),V(a.$$.fragment,_),r=!0)},o(_){j(f,_),j(s),j(m),j(a.$$.fragment,_),r=!1},d(_){_&&c(e),f&&f.d(_),s&&s.d(),m&&m.d(),ne(a)}}}function rl(t,e,n){let{$$slots:l={},$$scope:i}=e;const a=Nt([5,14],[.5,4]),o={work:[39,160,204],migration:[246,96,104]};let{data:r}=e,{map:h=null}=e,{selected:f}=e,{hovered:s}=e,{highlighted:m}=e,{journeys:v}=e,{geo:L="lad"}=e,{pos:_="from"}=e,{highlight:E=null}=e,{filter:k=!0}=e,{color:D=o.work}=e,{pixelRatio:T=1}=e,{interactive:O=!0}=e,{showInfo:p=!0}=e,{showBreaks:b=!0}=e,S,I,N,u,B,d,X,z,x,he,Q=Ne();function ge(){n(11,S=r.sources),I=r.points,N=I.array.length;const w=J=>(B=Gt(J),d=Rt(B),z=d.buffer(I[_],{duration:5e3,ease:"linear"}),x=B.buffer(Array.from({length:N},()=>.7)),{render:d({vert:`
      precision lowp float;
      uniform mat4 uMatrix;
      uniform float pointSize;
      uniform vec3 pointColor;
      attribute vec2 position;
			attribute float opacity;
			varying vec4 fragColor;

      void main() {
        gl_PointSize = pointSize;
        gl_Position = uMatrix * vec4(position, 0, 1);
        fragColor = vec4(pointColor, opacity);
      }
        `,frag:`
      precision lowp float;
			varying vec4 fragColor;

      void main() {
        if (length(gl_PointCoord.xy - 0.5) > 0.5) {
          discard;
        }
        gl_FragColor = fragColor;
      }
      `,attributes:{position:z,opacity:x},uniforms:{pointSize:B.prop("pointSize")||2,pointColor:B.prop("pointColor"),uMatrix:B.prop("uMatrix")},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},count:N,primitive:"points"})});n(16,T=window.devicePixelRatio>1.5?1.5:window.devicePixelRatio),h.setPixelRatio(T),h.addLayer({id:"custom_layer",type:"custom",onAdd:(J,ie)=>{X=w(ie),B.frame(()=>{J&&u&&J.triggerRepaint()})},render(J,ie){he=ie,u=h.getZoom(),X.render({uMatrix:he,pointSize:a(u)*T,pointColor:D.map(ce=>ce/255)})}},"place_suburb")}let Y=E;function A(w=Y){f&&(x({data:k?I.array.map(J=>!w||J[`${w==="to"?"from":"to"}_${L}`]===f?1:.01):Array.from({length:I.array.length},()=>.7)}),Y=w)}let U=O;function P(w){const J=["boxZoom","doubleClickZoom","dragPan","dragRotate","keyboard","scrollZoom","touchPitch","touchZoomRotate"];if(U!==w){for(const ie of J)h&&w?h[ie].enable():h&&h[ie].disable();U=w}}let re=_;function Oe(w,J=5e3){re!==w&&(z.update(I[w],J?{duration:J}:null),re=w)}function ve(w){const J=w.from.slice(0,w.from.map($=>$.color).indexOf("rgba(255,255,255,0.0)")),ie=w.to.slice(0,w.from.map($=>$.color).indexOf("rgba(255,255,255,0.0)"));return Array.from(new Set([...J.map($=>$.code),...ie.map($=>$.code)])).map($=>{const de=r.metadata[$];return[de.xmin,de.ymin,de.xmax,de.ymax]}).reduce(($,de)=>[Math.min($[0],de[0]),Math.min($[1],de[1]),Math.max($[2],de[2]),Math.max($[3],de[3])])}async function Ge(w){var ie,ce;const J=typeof w=="string"?w:((ie=w==null?void 0:w.detail)==null?void 0:ie.id)||((ce=w==null?void 0:w.detail)==null?void 0:ce.areacd);if(console.debug("select",w,J),J){n(4,L=["E02","W02"].includes(J.slice(0,3))?"msoa":"lad"),n(3,v=await Dt(J)),n(1,f=J),A();const Ce=ve(v);h.fitBounds(Ce)}}function pe(w){var ie,ce,Ce,$;const J=typeof w=="string"?w:((ie=w==null?void 0:w.detail)==null?void 0:ie.id)||((ce=w==null?void 0:w.detail)==null?void 0:ce.areacd);console.log(f,J),n(12,Q=f&&E?Ne((Ce=r.metadata)==null?void 0:Ce[f],($=r.metadata)==null?void 0:$[J]):Ne()),console.log(Q)}function be(w){s=w,n(2,s)}function _e(w){s=w,n(2,s)}function bt(w){h=w,n(0,h)}return t.$$set=w=>{"data"in w&&n(5,r=w.data),"map"in w&&n(0,h=w.map),"selected"in w&&n(1,f=w.selected),"hovered"in w&&n(2,s=w.hovered),"highlighted"in w&&n(6,m=w.highlighted),"journeys"in w&&n(3,v=w.journeys),"geo"in w&&n(4,L=w.geo),"pos"in w&&n(17,_=w.pos),"highlight"in w&&n(7,E=w.highlight),"filter"in w&&n(18,k=w.filter),"color"in w&&n(19,D=w.color),"pixelRatio"in w&&n(16,T=w.pixelRatio),"interactive"in w&&n(8,O=w.interactive),"showInfo"in w&&n(9,p=w.showInfo),"showBreaks"in w&&n(10,b=w.showBreaks),"$$scope"in w&&n(24,i=w.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&128&&A(E),t.$$.dirty[0]&256&&P(O),t.$$.dirty[0]&131072&&Oe(_)},[h,f,s,v,L,r,m,E,O,p,b,S,Q,ge,Ge,pe,T,_,k,D,l,be,_e,bt,i]}class sl extends Le{constructor(e){super(),Ie(this,e,rl,ol,Se,{data:5,map:0,selected:1,hovered:2,highlighted:6,journeys:3,geo:4,pos:17,highlight:7,filter:18,color:19,pixelRatio:16,interactive:8,showInfo:9,showBreaks:10},null,[-1,-1])}}function gt(t,e,n){const l=t.slice();return l[11]=e[n],l}function ct(t,e,n){const l=t.slice();return l[14]=e[n],l}function mt(t){let e,n=t[14]+"",l;return{c(){e=G("option"),l=K(n),this.h()},l(i){e=R(i,"OPTION",{});var a=C(e);l=H(a,n),a.forEach(c),this.h()},h(){e.__value=t[14],Te(e,e.__value)},m(i,a){M(i,e,a),y(e,l)},p:me,d(i){i&&c(e)}}}function vt(t){let e,n=t[11]==="from"?"origin":"destination",l;return{c(){e=G("option"),l=K(n),this.h()},l(i){e=R(i,"OPTION",{});var a=C(e);l=H(a,n),a.forEach(c),this.h()},h(){e.__value=t[11],Te(e,e.__value)},m(i,a){M(i,e,a),y(e,l)},p:me,d(i){i&&c(e)}}}function fl(t){let e,n,l,i,a,o,r,h,f,s,m,v,L,_,E,k,D,T,O,p,b,S,I,N="working here",u,B="living here",d,X="none",z,x,he=q(t[5]),Q=[];for(let A=0;A<he.length;A+=1)Q[A]=mt(ct(t,he,A));let ge=q(t[6]),Y=[];for(let A=0;A<ge.length;A+=1)Y[A]=vt(gt(t,ge,A));return{c(){e=G("div"),n=G("label"),l=G("input"),i=K(`
        Interactive`),a=F(),o=G("label"),r=K("Geo type"),h=G("br"),f=F(),s=G("select");for(let A=0;A<Q.length;A+=1)Q[A].c();m=F(),v=G("label"),L=K("Point location"),_=G("br"),E=F(),k=G("select");for(let A=0;A<Y.length;A+=1)Y[A].c();D=F(),T=G("label"),O=K("Highlight"),p=G("br"),b=F(),S=G("select"),I=G("option"),I.textContent=N,u=G("option"),u.textContent=B,d=G("option"),d.textContent=X,this.h()},l(A){e=R(A,"DIV",{class:!0});var U=C(e);n=R(U,"LABEL",{class:!0});var P=C(n);l=R(P,"INPUT",{type:!0}),i=H(P,`
        Interactive`),P.forEach(c),a=Z(U),o=R(U,"LABEL",{class:!0});var re=C(o);r=H(re,"Geo type"),h=R(re,"BR",{}),f=Z(re),s=R(re,"SELECT",{});var Oe=C(s);for(let _e=0;_e<Q.length;_e+=1)Q[_e].l(Oe);Oe.forEach(c),re.forEach(c),m=Z(U),v=R(U,"LABEL",{class:!0});var ve=C(v);L=H(ve,"Point location"),_=R(ve,"BR",{}),E=Z(ve),k=R(ve,"SELECT",{});var Ge=C(k);for(let _e=0;_e<Y.length;_e+=1)Y[_e].l(Ge);Ge.forEach(c),ve.forEach(c),D=Z(U),T=R(U,"LABEL",{class:!0});var pe=C(T);O=H(pe,"Highlight"),p=R(pe,"BR",{}),b=Z(pe),S=R(pe,"SELECT",{});var be=C(S);I=R(be,"OPTION",{"data-svelte-h":!0}),Ve(I)!=="svelte-1hla8p7"&&(I.textContent=N),u=R(be,"OPTION",{"data-svelte-h":!0}),Ve(u)!=="svelte-1k66d52"&&(u.textContent=B),d=R(be,"OPTION",{"data-svelte-h":!0}),Ve(d)!=="svelte-1jd81zj"&&(d.textContent=X),be.forEach(c),pe.forEach(c),U.forEach(c),this.h()},h(){g(l,"type","checkbox"),g(n,"class","svelte-1u46gza"),t[2]===void 0&&De(()=>t[8].call(s)),g(o,"class","svelte-1u46gza"),t[3]===void 0&&De(()=>t[9].call(k)),g(v,"class","svelte-1u46gza"),I.__value="from",Te(I,I.__value),u.__value="to",Te(u,u.__value),d.__value=null,Te(d,d.__value),t[4]===void 0&&De(()=>t[10].call(S)),g(T,"class","svelte-1u46gza"),g(e,"class","toggles svelte-1u46gza")},m(A,U){M(A,e,U),y(e,n),y(n,l),l.checked=t[1],y(n,i),y(e,a),y(e,o),y(o,r),y(o,h),y(o,f),y(o,s);for(let P=0;P<Q.length;P+=1)Q[P]&&Q[P].m(s,null);ke(s,t[2],!0),y(e,m),y(e,v),y(v,L),y(v,_),y(v,E),y(v,k);for(let P=0;P<Y.length;P+=1)Y[P]&&Y[P].m(k,null);ke(k,t[3],!0),y(e,D),y(e,T),y(T,O),y(T,p),y(T,b),y(T,S),y(S,I),y(S,u),y(S,d),ke(S,t[4],!0),z||(x=[we(l,"change",t[7]),we(s,"change",t[8]),we(k,"change",t[9]),we(S,"change",t[10])],z=!0)},p(A,U){if(U&2&&(l.checked=A[1]),U&32){he=q(A[5]);let P;for(P=0;P<he.length;P+=1){const re=ct(A,he,P);Q[P]?Q[P].p(re,U):(Q[P]=mt(re),Q[P].c(),Q[P].m(s,null))}for(;P<Q.length;P+=1)Q[P].d(1);Q.length=he.length}if(U&36&&ke(s,A[2]),U&64){ge=q(A[6]);let P;for(P=0;P<ge.length;P+=1){const re=gt(A,ge,P);Y[P]?Y[P].p(re,U):(Y[P]=vt(re),Y[P].c(),Y[P].m(k,null))}for(;P<Y.length;P+=1)Y[P].d(1);Y.length=ge.length}U&72&&ke(k,A[3]),U&16&&ke(S,A[4])},d(A){A&&c(e),ue(Q,A),ue(Y,A),z=!1,Ct(x)}}}function hl(t){let e,n;return e=new sl({props:{data:t[0],interactive:t[1],geo:t[2],pos:t[3],highlight:t[4],$$slots:{default:[fl]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),n=!0},p(l,i){const a={};i&1&&(a.data=l[0]),i&2&&(a.interactive=l[1]),i&4&&(a.geo=l[2]),i&8&&(a.pos=l[3]),i&16&&(a.highlight=l[4]),i&131102&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function ul(t){let e,n;return e=new Mt({props:{theme:"dark",$$slots:{default:[hl]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),n=!0},p(l,[i]){const a={};i&131103&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function _l(t,e,n){let{data:l}=e;const i=["lad","msoa"],a=["from","to"];let o=!0,r=i[0],h=a[0],f=null;function s(){o=this.checked,n(1,o)}function m(){r=Ae(this),n(2,r),n(5,i)}function v(){h=Ae(this),n(3,h),n(6,a)}function L(){f=Ae(this),n(4,f)}return t.$$set=_=>{"data"in _&&n(0,l=_.data)},[l,o,r,h,f,i,a,s,m,v,L]}class kl extends Le{constructor(e){super(),Ie(this,e,_l,ul,Se,{data:0})}}export{kl as component,bl as universal};
